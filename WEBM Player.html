<html>
<script type="text/javascript" src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
<body>
<div id="selectedvideo" style="position:absolute;top:1%;left:1%;color:#FFFFFF;font-size: 200%;-webkit-text-stroke-width: 0.7px;-webkit-text-stroke-color: black;font-family:Georgia;"></div>
<div id="player" style="width:100%;height:100%"><input id="fileItem" type="file" onchange="playvideo()" multiple></input><br>
<input id="displayselected" type="checkbox" style="color:#000000;font-size: 100%;-webkit-text-stroke-width: 0px;-webkit-text-stroke-color: white;" checked>Display selected video?</div>
</body>
<script>
var images=[];
function preload(url) {
	images[images.length-1] = new Image()
	images[images.length-1].src = url
}
	
var selectedvideo
var file=[];
var fileInput
var files
var displayselected=false
function playvideo(){
	if(document.getElementById("displayselected").checked){
		displayselected=true
	}
	selectedvideo=0
	document.onkeydown = checkKey;

	function checkKey(e) {
		e = e || window.event;
		if (e.keyCode == '38') {
			for(x=0;x<file.length;x++){
				console.log(file[x])
			}
		}
		else if (e.keyCode == '40') {
			// down arrow
		}
		else if (e.keyCode == '37') {
			if(selectedvideo<=0){selectedvideo=(file.length-1);fileURL = window.URL.createObjectURL(files[selectedvideo]);playvid(fileURL)}
			else{
				selectedvideo-=1
				fileURL = window.URL.createObjectURL(files[selectedvideo])
				playvid(fileURL)
			}
		}
		else if (e.keyCode == '39') {
			if(selectedvideo>=(file.length-1)){selectedvideo=0;fileURL = window.URL.createObjectURL(files[selectedvideo]);playvid(fileURL)}
			else{
				selectedvideo+=1
				fileURL = window.URL.createObjectURL(files[selectedvideo])
				playvid(fileURL)
			}
		}
		if(displayselected==true){
			document.getElementById("selectedvideo").innerHTML=(file[selectedvideo])
		}
	}
	fileInput = document.getElementById("fileItem");
	files = fileInput.files;
	for (i = 0; i < files.length; i++) {
		file[i] = files[i].name;
	}
	if(displayselected==true){
		document.getElementById("selectedvideo").innerHTML=(file[selectedvideo])
	}
	
	for (i = 0; i < files.length; i++) {
		preload(window.URL.createObjectURL(files[i]))
	}
	
	videotoplay = file[selectedvideo]
	fileURL = window.URL.createObjectURL(files[selectedvideo])
	console.log(fileURL)
	playvid(fileURL)

	function playvid(video){
		temporaryvariable1=file[selectedvideo].split(".")
		tempvar2 = temporaryvariable1[temporaryvariable1.length-1]
		if(tempvar2=="webm"){
			document.getElementById("player").innerHTML='<video width=100% height=100% autoplay loop> <source src="'+video+'" type="video/webm"> </video>'
		}
		else if(tempvar2=="png" || tempvar2=="jpg" || tempvar2=="gif"){
			document.getElementById("player").innerHTML='<image style="max-width:100%;max-height:100%;display: block;margin-left: auto;margin-right: auto" src="'+video+'"> </image>'
		}
	}
}
</script>
</html>